<!doctype html>
<html>
 <head>
  <title>Installation/Update Troubleshooting | Porta On Prem</title>
  <meta http-equiv="Content-Security-Policy" content="default-src 'none';
script-src 'self';
style-src 'unsafe-inline';
img-src file: *;
connect-src 'none';
font-src * data: *;
object-src 'none';
media-src 'none';
child-src 'none';">
  <style>/* Reworked by IntelliJ Team The MIT License (MIT) Copyright (c) JetBrains Adapted from https://github.com/sindresorhus/github-markdown-css The MIT License (MIT) Copyright (c) Sindre Sorhus &lt;sindresorhus@gmail.com&gt; (sindresorhus.com) Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. */ @font-face { font-family: octicons-anchor; src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAYcAA0AAAAACjQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABMAAAABwAAAAca8vGTk9TLzIAAAFMAAAARAAAAFZG1VHVY21hcAAAAZAAAAA+AAABQgAP9AdjdnQgAAAB0AAAAAQAAAAEACICiGdhc3AAAAHUAAAACAAAAAj//wADZ2x5ZgAAAdwAAADRAAABEKyikaNoZWFkAAACsAAAAC0AAAA2AtXoA2hoZWEAAALgAAAAHAAAACQHngNFaG10eAAAAvwAAAAQAAAAEAwAACJsb2NhAAADDAAAAAoAAAAKALIAVG1heHAAAAMYAAAAHwAAACABEAB2bmFtZQAAAzgAAALBAAAFu3I9x/Nwb3N0AAAF/AAAAB0AAAAvaoFvbwAAAAEAAAAAzBdyYwAAAADP2IQvAAAAAM/bz7t4nGNgZGFgnMDAysDB1Ml0hoGBoR9CM75mMGLkYGBgYmBlZsAKAtJcUxgcPsR8iGF2+O/AEMPsznAYKMwIkgMA5REMOXicY2BgYGaAYBkGRgYQsAHyGMF8FgYFIM0ChED+h5j//yEk/3KoSgZGNgYYk4GRCUgwMaACRoZhDwCs7QgGAAAAIgKIAAAAAf//AAJ4nHWMMQrCQBBF/0zWrCCIKUQsTDCL2EXMohYGSSmorScInsRGL2DOYJe0Ntp7BK+gJ1BxF1stZvjz/v8DRghQzEc4kIgKwiAppcA9LtzKLSkdNhKFY3HF4lK69ExKslx7Xa+vPRVS43G98vG1DnkDMIBUgFN0MDXflU8tbaZOUkXUH0+U27RoRpOIyCKjbMCVejwypzJJG4jIwb43rfl6wbwanocrJm9XFYfskuVC5K/TPyczNU7b84CXcbxks1Un6H6tLH9vf2LRnn8Ax7A5WQAAAHicY2BkYGAA4teL1+yI57f5ysDNwgAC529f0kOmWRiYVgEpDgYmEA8AUzEKsQAAAHicY2BkYGB2+O/AEMPCAAJAkpEBFbAAADgKAe0EAAAiAAAAAAQAAAAEAAAAAAAAKgAqACoAiAAAeJxjYGRgYGBhsGFgYgABEMkFhAwM/xn0QAIAD6YBhwB4nI1Ty07cMBS9QwKlQapQW3VXySvEqDCZGbGaHULiIQ1FKgjWMxknMfLEke2A+IJu+wntrt/QbVf9gG75jK577Lg8K1qQPCfnnnt8fX1NRC/pmjrk/zprC+8D7tBy9DHgBXoWfQ44Av8t4Bj4Z8CLtBL9CniJluPXASf0Lm4CXqFX8Q84dOLnMB17N4c7tBo1AS/Qi+hTwBH4rwHHwN8DXqQ30XXAS7QaLwSc0Gn8NuAVWou/gFmnjLrEaEh9GmDdDGgL3B4JsrRPDU2hTOiMSuJUIdKQQayiAth69r6akSSFqIJuA19TrzCIaY8sIoxyrNIrL//pw7A2iMygkX5vDj+G+kuoLdX4GlGK/8Lnlz6/h9MpmoO9rafrz7ILXEHHaAx95s9lsI7AHNMBWEZHULnfAXwG9/ZqdzLI08iuwRloXE8kfhXYAvE23+23DU3t626rbs8/8adv+9DWknsHp3E17oCf+Z48rvEQNZ78paYM38qfk3v/u3l3u3GXN2Dmvmvpf1Srwk3pB/VSsp512bA/GG5i2WJ7wu430yQ5K3nFGiOqgtmSB5pJVSizwaacmUZzZhXLlZTq8qGGFY2YcSkqbth6aW1tRmlaCFs2016m5qn36SbJrqosG4uMV4aP2PHBmB3tjtmgN2izkGQyLWprekbIntJFing32a5rKWCN/SdSoga45EJykyQ7asZvHQ8PTm6cslIpwyeyjbVltNikc2HTR7YKh9LBl9DADC0U/jLcBZDKrMhUBfQBvXRzLtFtjU9eNHKin0x5InTqb8lNpfKv1s1xHzTXRqgKzek/mb7nB8RZTCDhGEX3kK/8Q75AmUM/eLkfA+0Hi908Kx4eNsMgudg5GLdRD7a84npi+YxNr5i5KIbW5izXas7cHXIMAau1OueZhfj+cOcP3P8MNIWLyYOBuxL6DRylJ4cAAAB4nGNgYoAALjDJyIAOWMCiTIxMLDmZedkABtIBygAAAA==) format('woff'); } body { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: Helvetica, Arial, freesans, sans-serif; font-size: 14px; line-height: 1.6; word-wrap: break-word; margin: 0 2em; } strong { font-weight: bold; } img { border: 0; } input { color: inherit; font: inherit; margin: 0; line-height: normal; } html input[disabled] { cursor: default; } input[type="checkbox"] { box-sizing: border-box; padding: 0; } body * { box-sizing: border-box; } input { font: 13px/1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; } a { text-decoration: none; } a:hover, a:active { text-decoration: underline; } hr { height: 1px; padding: 0; margin: 20px 0; border: 0 none; } hr:before { display: table; content: ""; } hr:after { display: table; clear: both; content: ""; } blockquote { margin: 0; } ul, ol { padding: 0; margin-top: 0; margin-bottom: 0; } ol ol, ul ol { list-style-type: lower-roman; } ul ul ol, ul ol ol, ol ul ol, ol ol ol { list-style-type: lower-alpha; } dd { margin-left: 0; } .octicon { font: normal normal normal 16px/1 octicons-anchor; display: inline-block; text-decoration: none; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .octicon-link:before { content: '\f05c'; } .markdown-body &gt; *:first-child { margin-top: 0 !important; } .markdown-body &gt; *:last-child { margin-bottom: 0 !important; } .anchor { position: absolute; top: 0; left: 0; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; } .anchor:focus { outline: none; } h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; } h1 .octicon-link, h2 .octicon-link, h3 .octicon-link, h4 .octicon-link, h5 .octicon-link, h6 .octicon-link { display: none; color: #000; vertical-align: middle; } h1:hover .anchor, h2:hover .anchor, h3:hover .anchor, h4:hover .anchor, h5:hover .anchor, h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; } h1:hover .anchor .octicon-link, h2:hover .anchor .octicon-link, h3:hover .anchor .octicon-link, h4:hover .anchor .octicon-link, h5:hover .anchor .octicon-link, h6:hover .anchor .octicon-link { display: inline-block; } h1 { font-size: 2.2em; padding-top: 0.6em; } h1 .anchor { line-height: 1; } h2 { font-size: 1.8em; line-height: 1.2; padding-top: 0.6em; } h2 .anchor { line-height: 1.2; } h3 { font-size: 1.3em; line-height: 1; padding-top: 0.6em; } h3 .anchor { line-height: 1.2; } h4 { font-size: 1em; } h4 .anchor { line-height: 1.2; } h5 { font-size: 1em; } h5 .anchor { line-height: 1.1; } h6 { font-size: 1em; } h6 .anchor { line-height: 1.1; } p, blockquote, ul, ol, dl, table, pre { margin-top: 16px; margin-bottom: 16px; } pre.frontmatter-header { background-color: transparent; margin: 0; padding: 0; } ul, ol { padding-left: 2em; } ul ul, ul ol, ol ol, ol ul { margin-top: 0; margin-bottom: 0; } li &gt; p { margin-top: 0; margin-bottom: 0; } dl { padding: 0; } dl dt { padding: 0; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; } dl dd { padding: 0 16px; margin-bottom: 16px; } blockquote { padding: 10px 10px 10px 16px; border-left: 2px solid; border-radius: 0 3px 3px 0; } blockquote &gt; :first-child { margin-top: 0; } blockquote &gt; :last-child { margin-bottom: 0; } table { display: block; width: 100%; overflow: auto; word-break: normal; border-collapse: collapse; border-spacing: 0; font-size: 1em; } table th { font-weight: bold; } table th, table td { padding: 6px 13px; background: transparent; } table tr { border-top: 1px solid; } img { max-width: 100%; box-sizing: border-box; } code { font: 0.9em "JetBrains Mono", Consolas, "Liberation Mono", Menlo, Courier, monospace; padding: 0.2em 0.4em; margin: 2px; border-radius: 3px; } pre &gt; code { padding: 0; margin: 0; font-size: 100%; word-break: normal; white-space: pre; background: transparent; border: 0; } .highlight { margin-bottom: 16px; } .highlight pre, pre { font: 0.85em "JetBrains Mono", Consolas, "Liberation Mono", Menlo, Courier, monospace; padding: 16px; overflow: auto; line-height: 1.45; border-radius: 3px; } pre code { display: inline; max-width: initial; padding: 0; margin: 0; overflow: initial; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0; } pre code:before, pre code:after { content: normal; } kbd { font: 0.9em "JetBrains Mono", Consolas, "Liberation Mono", Menlo, Courier, monospace; padding: 0.2em 0.4em; margin: 2px; border-radius: 3px; } .task-list-item { list-style-type: none; } .task-list-item + .task-list-item { margin-top: 3px; } .task-list-item input { margin: 0 0.35em 0.25em -0.6em; vertical-align: middle; } :checked + .radio-label { z-index: 1; position: relative; } span.user-del { text-decoration: line-through; } ::-webkit-scrollbar { width: 6px; height: 6px; } ::-webkit-scrollbar-thumb { -webkit-border-radius: 10px; } ::-webkit-scrollbar-track:vertical { -webkit-box-shadow: -1px 0 0 #ededed; } ::-webkit-scrollbar-track { background-color: transparent; } ::-webkit-scrollbar { width: 6px; }</style>
  <style>:root { --default-font-size: 13px; } body { background-color: rgba(34, 36, 54, 255.0); font-size: var(--default-font-size) !important; } body, p, blockquote, ul, ol, dl, table, pre, code, tr { color: rgba(200, 211, 245, 255.0); } a { color: rgba(116, 160, 241, 255.0); } table td, table th { border: 1px solid rgba(34, 36, 54, 255.0); } hr { background-color: rgba(34, 36, 54, 255.0); } kbd, tr { border: 1px solid rgba(34, 36, 54, 255.0); } h6 { color: rgba(169, 184, 232, 255.0); } blockquote { border-left: 2px solid rgba(116, 160, 241, 0.4); } blockquote, code, pre { background-color: rgba(212, 222, 231, 0.09803921568627451); } ::-webkit-scrollbar { width: 10px; height: 10px; background-color: rgba(0, 0, 0, 0); } ::-webkit-scrollbar-track { background-color: rgba(0, 0, 0, 0); } ::-webkit-scrollbar-track:hover { background-color: rgba(0, 0, 0, 0); } ::-webkit-scrollbar-thumb { background-color: rgba(79, 214, 190, 0.752941); border-radius: 0px; border-width: 1px; border-style: solid; border-color: rgba(0, 0, 0, 0); background-clip: padding-box; outline: 1px solid rgba(56, 56, 56, 0.278431); outline-offset: -1px; } ::-webkit-scrollbar-thumb:hover { background-color: rgba(79, 214, 190, 1.000000); border-radius: 0px; border-width: 1px; border-style: solid; border-color: rgba(0, 0, 0, 0); background-clip: padding-box; outline: 1px solid rgba(56, 56, 56, 0.349020); outline-offset: -1px; } ::-webkit-scrollbar-corner { background-color: rgba(0, 0, 0, 0); } ::-webkit-scrollbar-button { display:none; }</style>
  <style>/* Copyright 2000-2021 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. */ .code-fence-highlighter-copy-button { display: flex; position: absolute; float: left; margin-left: -1em; margin-top: -1em; } .code-fence-highlighter-copy-button-icon { visibility: hidden; max-width: 1em; } .code-fence:hover .code-fence-highlighter-copy-button-icon { visibility: visible; /*noinspection CssUnknownTarget*/ content: url("copy-button-copy-icon.png"); } .code-fence:hover .code-fence-highlighter-copy-button:hover .code-fence-highlighter-copy-button-icon { /*noinspection CssUnknownTarget*/ content: url("copy-button-copy-icon-hovered.png"); cursor: pointer; } .code-fence-highlighter-copy-button .tooltiptext { visibility: hidden; width: 120px; background-color: rgba(85, 85, 85, 0.4); color: #fff; text-align: center; border-radius: 6px; padding: 2px 0; position: absolute; font-size: 10px; z-index: 1; top: -4px; left: 120%; opacity: 0; transition: opacity 0.3s; } .code-fence-highlighter-copy-button:hover .tooltiptext { visibility: visible; opacity: 1; }</style>
  <style>/* Copyright 2000-2021 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. */ .run-icon &gt; img { max-width: 1em; vertical-align: text-top; margin-right: 0.3em; } .code-block { position: absolute; left: 1em; } .hidden { display: none; }</style>
 </head>
 <body>
  <div md-src-pos="0..12148">
   <h1 id="contents" md-src-pos="1..11">Contents</h1>
   <ul md-src-pos="12..2218">
    <li md-src-pos="12..2218"><a href="#installationupdate-troubleshooting" md-src-pos="14..49">Installation/Update Troubleshooting</a>
     <ul md-src-pos="52..2218">
      <li md-src-pos="52..99"><a href="#database-replication" md-src-pos="54..99">Database Replication</a></li>
      <li md-src-pos="102..294"><a href="#installation-aborts-because-container-porta-socket-did-not-become-ready-within-the-timeout" md-src-pos="104..294">Installation Aborts because <code md-src-pos="133..200">Container 'porta-socket' did not become ready within the timeout.</code></a></li>
      <li md-src-pos="297..452"><a href="#porta-version-listed-in-the-about-section-does-not-appear-to-have-changed" md-src-pos="299..452">Porta Version listed in the <code md-src-pos="328..335">About</code> section does not appear to have changed</a></li>
      <li md-src-pos="455..652"><a href="#sqlstate23000-integrity-constraint-violation-1062-duplicate-entry-superadmindisguiseone-for-key-usersusers_email_unique" md-src-pos="457..652"><code md-src-pos="458..529">SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry</code></a></li>
      <li md-src-pos="655..816"><a href="#illuminatedatabasequeryexception---sqlstatehy000-2002-connection-refused" md-src-pos="657..816"><strong md-src-pos="658..740">Illuminate\Database\QueryException - SQLSTATE[HY000] [2002] Connection refused</strong></a></li>
      <li md-src-pos="819..944"><a href="#the-command-docker-could-not-be-found-in-this-wsl-2-distro" md-src-pos="821..944">The command 'docker' could not be found in this WSL 2 distro</a></li>
      <li md-src-pos="947..1147"><a href="#warning-redis-connection-could-not-be-made-to-redislocalhost6379--error-connect-econnrefused" md-src-pos="949..1147">Warning: Redis connection could not be made to 'redis://localhost:6379' : Error: connect ECONNREFUSED</a></li>
      <li md-src-pos="1150..1332"><a href="#line-2-r-command-not-found-or-binbashm-bad-interpreter-no-such-file-or-directory" md-src-pos="1152..1332"><code md-src-pos="1153..1187">line 2: $'\r': command not found</code> or <code md-src-pos="1191..1248">/bin/bash^M: bad interpreter: No such file or directory</code></a></li>
      <li md-src-pos="1335..1619"><a href="#error-3093-hy000-at-line-1-the-group_replication_group_name-cannot-be-changed-when-group-replication-is-running-with-the-read-only-option" md-src-pos="1337..1619">ERROR 3093 (HY000) at line 1: The group_replication_group_name cannot be changed when Group Replication is running with the read only option</a></li>
      <li md-src-pos="1622..1809"><a href="#sqlstatehy000-general-error-1290-the-mysql-server-is-running-with-the---read-only-option" md-src-pos="1624..1809">SQLSTATE[HY000]: General error: 1290 The MySQL server is running with the --read-only option</a></li>
      <li md-src-pos="1812..1997"><a href="#when-running-backup-tool-command-backup-failed-because-parameter-host-cannot-be-empty" md-src-pos="1814..1997">When running backup tool command: <code md-src-pos="1849..1908">Backup failed because Parameter 'host' cannot be empty...</code></a></li>
      <li md-src-pos="2000..2218"><a href="#error-on-login-500-internal-server-error--could-not-create-token-key-provided-is-shorter-than-256-bits" md-src-pos="2002..2218">Error on Login: "500 Internal Server Error" / "Could not create token: Key provided is shorter than 256 bits"</a></li>
     </ul></li>
   </ul>
   <h1 id="installationupdate-troubleshooting" md-src-pos="2220..2257">Installation/Update Troubleshooting</h1>
   <h2 id="database-replication" md-src-pos="2259..2282">Database Replication</h2>
   <p md-src-pos="2283..2402"><span md-src-pos="2283..2312">For database troubleshooting,</span> <span md-src-pos="2313..2316">see</span> <a href="file:/wsl$/Ubuntu-22.04/home/jessd/code/porta-api/offline/install/docs/group-replication-troubleshooting.html" md-src-pos="2317..2402">group-replication-troubleshooting.html</a></p>
   <h2 id="installation-aborts-because-container-porta-socket-did-not-become-ready-within-the-timeout" md-src-pos="2405..2503">Installation Aborts because <code md-src-pos="2436..2503">Container 'porta-socket' did not become ready within the timeout.</code></h2>
   <p md-src-pos="2504..2707"><span md-src-pos="2504..2590">This error can occur when the socket server container is not able to start up in time,</span> <span md-src-pos="2591..2637">without being caused by any particular errors.</span> <span md-src-pos="2638..2707">Re-run the install/update script and it should complete successfully.</span></p>
   <h2 id="porta-version-listed-in-the-about-section-does-not-appear-to-have-changed" md-src-pos="2710..2788">Porta Version listed in the <code md-src-pos="2741..2748">About</code> section does not appear to have changed</h2>
   <p md-src-pos="2789..2912"><span md-src-pos="2789..2845">It could be that the browser is caching the old version.</span> <span md-src-pos="2846..2901">Try clearing the browser cache and refreshing the page.</span> <span md-src-pos="2902..2911">In Chrome</span>:</p>
   <ul md-src-pos="2913..3195">
    <li md-src-pos="2913..3011">Click on the browser address bar (Porta disables some default keyboard shortcuts in the browser)</li>
    <li md-src-pos="3012..3035">Hit Ctrl+Shift+Delete</li>
    <li md-src-pos="3036..3155">Under the basic tab,
     <ul md-src-pos="3061..3155">
      <li md-src-pos="3061..3101">select "All time" for the time range</li>
      <li md-src-pos="3104..3155">check the box for "Cookies and other site data"</li>
     </ul></li>
    <li md-src-pos="3156..3176">Click "Clear data"</li>
    <li md-src-pos="3177..3195">Refresh the page</li>
   </ul>
   <p md-src-pos="3197..3305"><span md-src-pos="3197..3258">To check against the version registered in the Porta backend,</span> <span md-src-pos="3259..3304">run the following command in the WSL terminal</span>:</p>
   <pre class="code-fence" md-src-pos="3306..3372"><div class="code-fence-highlighter-copy-button" data-fence-content="ZG9ja2VyIGV4ZWMgLWkgcG9ydGEgc2ggLWMgInBocCBhcnRpc2FuIGNoZWNrOnZlcnNpb24i">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="3306..3372"><a class="run-icon code-block" href="#" role="button" data-command="Run:4f732fbec5a4945bf0711cebaebefba" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="2687..2695"></span><span md-src-pos="2695..2722">docker exec -i porta sh -c </span><span md-src-pos="2722..2723" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="2723..2748" style="color: rgb(122, 248, 202);">php artisan check:version</span><span md-src-pos="2748..2749" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="2749..2750">
</span><span md-src-pos="2750..2753"></span></code></pre>
   <p md-src-pos="3374..3493"><span md-src-pos="3374..3401">If this version is correct,</span> <span md-src-pos="3402..3493">then the update was successful and the browser is just caching the old version information.</span></p>
   <h2 id="sqlstate23000-integrity-constraint-violation-1062-duplicate-entry-superadmindisguiseone-for-key-usersusers_email_unique" md-src-pos="3495..3630"><code md-src-pos="3498..3630">SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'superadmin@disguise.one' for key 'users.users_email_unique'</code></h2>
   <p md-src-pos="3631..3811"><span md-src-pos="3631..3723">This error usually occurs when the install script is run more than once on the same machine.</span> <span md-src-pos="3724..3811">Operation should not be affected and you may continue the installation steps as normal.</span></p>
   <h2 id="illuminatedatabasequeryexception---sqlstatehy000-2002-connection-refused" md-src-pos="3813..3898"><strong md-src-pos="3816..3898">Illuminate\Database\QueryException - SQLSTATE[HY000] [2002] Connection refused</strong></h2>
   <p md-src-pos="3899..4079"><span md-src-pos="3899..4012">Sometimes the database is not finished running/configuring before the install script tries to make changes to it.</span> <span md-src-pos="4013..4026">In this case,</span> <span md-src-pos="4027..4078">just run the following commands in the WSL terminal</span>:</p>
   <p md-src-pos="4081..4171"><strong md-src-pos="4081..4108">For first time installs</strong>: <span md-src-pos="4110..4152">set the config and initialize the database</span> <span md-src-pos="4153..4154">&amp;</span> <span md-src-pos="4155..4170">Run data insert</span>:</p>
   <pre class="code-fence" md-src-pos="4172..4276"><div class="code-fence-highlighter-copy-button" data-fence-content="ZG9ja2VyIGV4ZWMgLWl0IHBvcnRhIGJhc2ggLWMgInBocCBhcnRpc2FuIGNvbmZpZzpjYWNoZSAmJiB5ZXMgfCBwaHAgYXJ0aXNhbiBtaWdyYXRlIC0tc2VlZCI=">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="4172..4276"><a class="run-icon code-block" href="#" role="button" data-command="Run:112e0444c56f08f293caddc83ce9defd" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="3553..3561"></span><span md-src-pos="3561..3591">docker exec -it porta bash -c </span><span md-src-pos="3591..3592" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="3592..3652" style="color: rgb(122, 248, 202);">php artisan config:cache &amp;&amp; yes | php artisan migrate --seed</span><span md-src-pos="3652..3653" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="3653..3654">
</span><span md-src-pos="3654..3657"></span></code></pre>
   <p md-src-pos="4278..4338"><strong md-src-pos="4278..4293">For updates</strong>: <span md-src-pos="4295..4337">set the config and initialize the database</span>:</p>
   <pre class="code-fence" md-src-pos="4339..4436"><div class="code-fence-highlighter-copy-button" data-fence-content="ZG9ja2VyIGV4ZWMgLWl0IHBvcnRhIGJhc2ggLWMgInBocCBhcnRpc2FuIGNvbmZpZzpjYWNoZSAmJiB5ZXMgfCBwaHAgYXJ0aXNhbiBtaWdyYXRlIg==">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="4339..4436"><a class="run-icon code-block" href="#" role="button" data-command="Run:be1a18252764ff8955b613a63d29dc0" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="3720..3728"></span><span md-src-pos="3728..3758">docker exec -it porta bash -c </span><span md-src-pos="3758..3759" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="3759..3812" style="color: rgb(122, 248, 202);">php artisan config:cache &amp;&amp; yes | php artisan migrate</span><span md-src-pos="3812..3813" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="3813..3814">
</span><span md-src-pos="3814..3817"></span></code></pre>
   <h2 id="the-command-docker-could-not-be-found-in-this-wsl-2-distro" md-src-pos="4438..4501">The command 'docker' could not be found in this WSL 2 distro</h2>
   <p md-src-pos="4502..4634"><span md-src-pos="4502..4534">If you see this error along with</span> '<span md-src-pos="4536..4541">ERROR</span>: <span md-src-pos="4543..4568">Error occurred in command</span>: '<span md-src-pos="4571..4582">docker load</span> <span md-src-pos="4583..4585">-i</span> "<span md-src-pos="4587..4604">$PORTA_IMAGES_TAR</span>"' (<span md-src-pos="4608..4617">Exit Code</span>: <span md-src-pos="4619..4620">1</span>) <span md-src-pos="4622..4632">at line 39</span>':</p>
   <ul md-src-pos="4635..4901">
    <li md-src-pos="4635..4901">Make sure Docker Desktop is running; you should be able to see the Docker icon in the taskbar or system tray
     <ul md-src-pos="4748..4901">
      <li md-src-pos="4748..4901">If it appears to be running, it could be in resource-saver mode. In the system tray, right-click the Docker icon and select "restart", then try again</li>
     </ul></li>
   </ul>
   <p md-src-pos="4903..5165"><span md-src-pos="4903..4930">If the above does not work,</span> <span md-src-pos="4931..4989">make sure Ubuntu 22.04 is set as your default Linux distro</span>: <a href="https://d3technologies.atlassian.net/wiki/spaces/PORTA/pages/1714815165/Porta+Local+Development+Setup#Set-default-distro" md-src-pos="4991..5165">Porta Local Development Setup | Set default distro</a></p>
   <h2 id="warning-redis-connection-could-not-be-made-to-redislocalhost6379--error-connect-econnrefused-1270016379" md-src-pos="5167..5286">Warning: Redis connection could not be made to 'redis://localhost:6379' : Error: connect ECONNREFUSED 127.0.0.1:6379</h2>
   <ol md-src-pos="5287..5459">
    <li md-src-pos="5287..5322">Stop the Socket Server container</li>
    <li md-src-pos="5323..5385">Ensure the Redis container is started (start or restart it)</li>
    <li md-src-pos="5386..5459">Once the Redis container is running, start the Socket Server container</li>
   </ol>
   <h2 id="line-2-r-command-not-found-or-binbashm-bad-interpreter-no-such-file-or-directory" md-src-pos="5461..5559"><code md-src-pos="5464..5498">line 2: $'\r': command not found</code> or <code md-src-pos="5502..5559">/bin/bash^M: bad interpreter: No such file or directory</code></h2>
   <p md-src-pos="5560..5703"><span md-src-pos="5560..5619">This is caused by windows line endings in the bash scripts.</span> <span md-src-pos="5620..5702">Run the following command in the porta/porta-onprem directory in WSL and try again</span>:</p>
   <pre class="code-fence" md-src-pos="5704..5759"><div class="code-fence-highlighter-copy-button" data-fence-content="ZmluZCAuIC10eXBlIGYgLWV4ZWMgc2VkIC1pICdzL1xyJC8vJyB7fSBcOw==">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="5704..5759"><a class="run-icon code-block" href="#" role="button" data-command="Run:2aabdca7ddb0c86a11512a11c44d2bcb" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="5085..5093"></span><span md-src-pos="5093..5121">find . -type f -exec sed -i </span><span md-src-pos="5121..5130" style="color: rgb(122, 248, 202);">'s/\r$//'</span><span md-src-pos="5130..5131"> </span><span md-src-pos="5131..5132" style="color: rgb(127, 218, 255);">{</span><span md-src-pos="5132..5133" style="color: rgb(127, 218, 255);">}</span><span md-src-pos="5133..5137"> \;
</span><span md-src-pos="5137..5140"></span></code></pre>
   <h2 id="error-3093-hy000-at-line-1-the-group_replication_group_name-cannot-be-changed-when-group-replication-is-running" md-src-pos="5762..5879">ERROR 3093 (HY000) at line 1: The group_replication_group_name cannot be changed when Group Replication is running</h2>
   <p md-src-pos="5880..5994"><span md-src-pos="5880..5994">This error can occur when running the install script on a machine that has already been set up as a Porta machine.</span></p>
   <p md-src-pos="5996..6242"><span md-src-pos="5996..6033">Simply restart the database container</span> (<span md-src-pos="6035..6055">using the UI or with</span> <code md-src-pos="6056..6089">docker restart &lt;container-name&gt;</code>) <span md-src-pos="6091..6118">and then view the container</span>'<span md-src-pos="6119..6164">s logs to ensure replication starts correctly</span>: <code md-src-pos="6166..6199">docker logs -f &lt;container-name&gt;</code><span md-src-pos="6199..6200">.</span> <span md-src-pos="6201..6241">You should eventually see a message like</span>:</p>
   <pre class="code-fence" md-src-pos="6243..6377"><div class="code-fence-highlighter-copy-button" data-fence-content="W1N5c3RlbV0gW01ZLTAxMTQ5MF0gW1JlcGxdIFBsdWdpbiBncm91cF9yZXBsaWNhdGlvbiByZXBvcnRlZDogJ1RoaXMgc2VydmVyIHdhcyBkZWNsYXJlZCBvbmxpbmUgd2l0aGluIHRoZSByZXBsaWNhdGlvbiBncm91cC4n">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code md-src-pos="6243..6377"><span md-src-pos="6243..6247"></span><span md-src-pos="6247..6374">[System] [MY-011490] [Repl] Plugin group_replication reported: 'This server was declared online within the replication group.'
</span><span md-src-pos="6374..6377"></span></code></pre>
   <p md-src-pos="6379..6496"><span md-src-pos="6379..6414">If this occurs on the main machine,</span> <span md-src-pos="6415..6454">you may also need to seed the database.</span> <span md-src-pos="6455..6495">Check to see if any users are registered</span>:</p>
   <pre class="code-fence" md-src-pos="6497..6577"><div class="code-fence-highlighter-copy-button" data-fence-content="ZG9ja2VyIGV4ZWMgLWl0IHBvcnRhLWRiIG15c3FsIC11cm9vdCAtcCAtZSAiU0VMRUNUICogRlJPTSBwb3J0YS51c2Vyczsi">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code md-src-pos="6497..6577"><span md-src-pos="6497..6501"></span><span md-src-pos="6501..6584">docker exec -it porta-db mysql -uroot -p -e "SELECT * FROM porta.users;"
</span><span md-src-pos="6574..6577"></span></code></pre>
   <p md-src-pos="6579..6657"><span md-src-pos="6579..6633">If this is the main machine and the results are empty,</span> <span md-src-pos="6634..6656">seed the database with</span>:</p>
   <pre class="code-fence" md-src-pos="6658..6724"><div class="code-fence-highlighter-copy-button" data-fence-content="ZG9ja2VyIGV4ZWMgLWl0IHBvcnRhIGJhc2ggLWMgInBocCBhcnRpc2FuIG1pZ3JhdGUgLS1zZWVkIg==">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code md-src-pos="6658..6724"><span md-src-pos="6658..6662"></span><span md-src-pos="6662..6731">docker exec -it porta bash -c "php artisan migrate --seed"
</span><span md-src-pos="6721..6724"></span></code></pre>
   <h2 id="sqlstatehy000-general-error-1290-the-mysql-server-is-running-with-the---read-only-option" md-src-pos="6726..6821">SQLSTATE[HY000]: General error: 1290 The MySQL server is running with the --read-only option</h2>
   <p md-src-pos="6822..7048"><span md-src-pos="6822..6870">If this error is displayed in the Porta web app,</span> <span md-src-pos="6871..6940">then this instance of Porta is not connected to the primary database.</span> <span md-src-pos="6941..6943">It</span>'<span md-src-pos="6944..7048">s possible for this issue to occur if a database has recently gone down and Porta has not yet recovered.</span></p>
   <p md-src-pos="7050..7168"><span md-src-pos="7050..7105">Porta should automatically recover after a few seconds,</span> <span md-src-pos="7106..7129">however if it does not,</span> <span md-src-pos="7130..7167">then you can take the following steps</span>:</p>
   <p md-src-pos="7170..7266"><span md-src-pos="7170..7202">Ensure that at least two machine</span>'<span md-src-pos="7203..7266">s databases are running and check the database logs for errors.</span></p>
   <p md-src-pos="7268..7279"><span md-src-pos="7268..7278">Check logs</span>:</p>
   <pre class="code-fence" md-src-pos="7280..7320"><div class="code-fence-highlighter-copy-button" data-fence-content="ZG9ja2VyIGxvZ3MgPGNvbnRhaW5lci1uYW1lPg==">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="7280..7320"><a class="run-icon code-block" href="#" role="button" data-command="Run:72f9f20ae50a5e4e490ec1ea122163ca" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="6661..6669"></span><span md-src-pos="6669..6681">docker logs </span><span md-src-pos="6681..6682" style="color: rgb(186, 172, 255);">&lt;</span><span md-src-pos="6682..6696">container-name</span><span md-src-pos="6696..6697" style="color: rgb(186, 172, 255);">&gt;</span><span md-src-pos="6697..6698">
</span><span md-src-pos="6698..6701"></span></code></pre>
   <p md-src-pos="7322..7360"><span md-src-pos="7322..7359">View group members and make sure that</span>:</p>
   <ul md-src-pos="7361..7542">
    <li md-src-pos="7361..7417">at least two members have a <code md-src-pos="7391..7405">MEMBER_STATE</code> of <code md-src-pos="7409..7417">ONLINE</code></li>
    <li md-src-pos="7418..7466">only one member has <code md-src-pos="7440..7453">MEMBER_ROLE</code> of <code md-src-pos="7457..7466">PRIMARY</code></li>
    <li md-src-pos="7467..7542">the member with <code md-src-pos="7485..7498">MEMBER_ROLE</code> of <code md-src-pos="7502..7511">PRIMARY</code> has <code md-src-pos="7516..7530">MEMBER_STATE</code> of <code md-src-pos="7534..7542">ONLINE</code></li>
   </ul>
   <pre class="code-fence" md-src-pos="7543..7668"><div class="code-fence-highlighter-copy-button" data-fence-content="ZG9ja2VyIGV4ZWMgLWl0IDxjb250YWluZXItbmFtZT4gbXlzcWwgLXVyb290IC1wIC1lICJTRUxFQ1QgKiBGUk9NIHBlcmZvcm1hbmNlX3NjaGVtYS5yZXBsaWNhdGlvbl9ncm91cF9tZW1iZXJzOyI=">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="7543..7668"><a class="run-icon code-block" href="#" role="button" data-command="Run:392575eb2a3468bea3c993fc2ff4230b" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="6924..6932"></span><span md-src-pos="6932..6948">docker exec -it </span><span md-src-pos="6948..6949" style="color: rgb(186, 172, 255);">&lt;</span><span md-src-pos="6949..6963">container-name</span><span md-src-pos="6963..6964" style="color: rgb(186, 172, 255);">&gt;</span><span md-src-pos="6964..6984"> mysql -uroot -p -e </span><span md-src-pos="6984..6985" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="6985..7044" style="color: rgb(122, 248, 202);">SELECT * FROM performance_schema.replication_group_members;</span><span md-src-pos="7044..7045" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="7045..7046">
</span><span md-src-pos="7046..7049"></span></code></pre>
   <p md-src-pos="7669..7704"><span md-src-pos="7669..7703">This will result in something like</span>:</p>
   <pre class="code-fence" md-src-pos="7705..8941"><div class="code-fence-highlighter-copy-button" data-fence-content="Ky0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rCnwgQ0hBTk5FTF9OQU1FICAgICAgICAgICAgICB8IE1FTUJFUl9JRCAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1FTUJFUl9IT1NUICAgIHwgTUVNQkVSX1BPUlQgfCBNRU1CRVJfU1RBVEUgfCBNRU1CRVJfUk9MRSB8IE1FTUJFUl9WRVJTSU9OIHwgTUVNQkVSX0NPTU1VTklDQVRJT05fU1RBQ0sgfAorLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsKfCBncm91cF9yZXBsaWNhdGlvbl9hcHBsaWVyIHwgMWEzNTFjZTMtYmExOS0xMWVlLTllNTktMDI0MmFjMTIwMDAyIHwgMTkyLjE2OC41MC4xNjMgfCAgICAgICAgMzMwNiB8IE9OTElORSAgICAgICB8IFBSSU1BUlkgICB8IDguMC4zMiAgICAgICAgIHwgWENvbSAgICAgICAgICAgICAgICAgICAgICAgfAp8IGdyb3VwX3JlcGxpY2F0aW9uX2FwcGxpZXIgfCBkN2MwNTM1Yy1iYTE5LTExZWUtOWYyOC0wMjQyYWMxNDAwMDIgfCAxOTIuMTY4LjUwLjIwICB8ICAgICAgICAzMzA3IHwgT05MSU5FICAgICAgIHwgU0VDT05EQVJZICAgfCA4LjAuMzIgICAgICAgICB8IFhDb20gICAgICAgICAgICAgICAgICAgICAgIHwKfCBncm91cF9yZXBsaWNhdGlvbl9hcHBsaWVyIHwgZTRhMGFjNjMtYmExOS0xMWVlLTlmNTQtMDI0MmFjMTUwMDAyIHwgMTkyLjE2OC41MC40MiAgfCAgICAgICAgMzMwOCB8IE9OTElORSAgICAgICB8IFNFQ09OREFSWSAgICAgfCA4LjAuMzIgICAgICAgICB8IFhDb20gICAgICAgICAgICAgICAgICAgICAgIHwKKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0r">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="7705..8941"><a class="run-icon code-block" href="#" role="button" data-command="Run:43761f669e44c8b570021750f31c28c2" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="9451..9459"></span><span md-src-pos="9459..9634">+---------------------------+--------------------------------------+----------------+-------------+--------------+-------------+----------------+----------------------------+
</span><span md-src-pos="9634..9809">| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST    | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION | MEMBER_COMMUNICATION_STACK |
</span><span md-src-pos="9809..9984">+---------------------------+--------------------------------------+----------------+-------------+--------------+-------------+----------------+----------------------------+
</span><span md-src-pos="9984..10077">| group_replication_applier | 1a351ce3-ba19-11ee-9e59-0242ac120002 | 192.168.50.163 |        </span><span md-src-pos="10077..10081" style="color: rgb(255, 150, 104);">3306</span><span md-src-pos="10081..10157"> | ONLINE       | PRIMARY   | 8.0.32         | XCom                       |
</span><span md-src-pos="10157..10250">| group_replication_applier | d7c0535c-ba19-11ee-9f28-0242ac140002 | 192.168.50.20  |        </span><span md-src-pos="10250..10254" style="color: rgb(255, 150, 104);">3307</span><span md-src-pos="10254..10332"> | ONLINE       | SECONDARY   | 8.0.32         | XCom                       |
</span><span md-src-pos="10332..10425">| group_replication_applier | e4a0ac63-ba19-11ee-9f54-0242ac150002 | 192.168.50.42  |        </span><span md-src-pos="10425..10429" style="color: rgb(255, 150, 104);">3308</span><span md-src-pos="10429..10509"> | ONLINE       | SECONDARY     | 8.0.32         | XCom                       |
</span><span md-src-pos="10509..10684">+---------------------------+--------------------------------------+----------------+-------------+--------------+-------------+----------------+----------------------------+
</span><span md-src-pos="10712..10721"></span></code></pre>
   <p md-src-pos="8943..9051"><span md-src-pos="8943..8968">If everything looks good,</span> <span md-src-pos="8969..9050">see if Porta is detecting the primary connection correctly on the problem machine</span>:</p>
   <pre class="code-fence" md-src-pos="9052..9233"><div class="code-fence-highlighter-copy-button" data-fence-content="ZG9ja2VyIGV4ZWMgLWl0IHBvcnRhIGJhc2ggLWMgInBocCBhcnRpc2FuIGhlYWx0aDpzaW5nbGUtY2hlY2sgJ1ByaW1hcnlEYXRhYmFzZUNvbm5lY3Rpb25DaGVjaycgLS1kby1ub3Qtc3RvcmUtcmVzdWx0cyAtLW5vLW5vdGlmaWNhdGlvbiAtLWZhaWwtY29tbWFuZC1vbi1mYWlsaW5nLWNoZWNrIg==">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="9052..9233"><a class="run-icon code-block" href="#" role="button" data-command="Run:48cae05245b7f0c41ccbf7fee73a2a16" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="8433..8441"></span><span md-src-pos="8441..8471">docker exec -it porta bash -c </span><span md-src-pos="8471..8472" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="8472..8609" style="color: rgb(122, 248, 202);">php artisan health:single-check 'PrimaryDatabaseConnectionCheck' --do-not-store-results --no-notification --fail-command-on-failing-check</span><span md-src-pos="8609..8610" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="8610..8611">
</span><span md-src-pos="8611..8614"></span></code></pre>
   <p md-src-pos="9234..9269"><span md-src-pos="9234..9268">This will result in something like</span>:</p>
   <pre class="code-fence" md-src-pos="9270..9441"><div class="code-fence-highlighter-copy-button" data-fence-content="UnVubmluZyBoZWFsdGggY2hlY2suLi4KClJ1bm5pbmcgY2hlY2s6IFByaW1hcnkgRGF0YWJhc2UgQ29ubmVjdGlvbi4uLgpPazogRm91bmQgb25saW5lIHByaW1hcnk6IHsibWVtYmVyX2hvc3QiOiIxOTIuMTY4LjUwLjE2MyIsIG1lbWJlcl9wb3J0IjozMzA2fQoKQWxsIGRvbmUh">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="9270..9441"><a class="run-icon code-block" href="#" role="button" data-command="Run:6ce380c0bb038e36d1aef9ec902e91ef" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="8651..8659"></span><span md-src-pos="8659..8683">Running health check...
</span><span md-src-pos="8683..8684">
</span><span md-src-pos="8684..8730">Running check: Primary Database Connection...
</span><span md-src-pos="8730..8756">Ok: Found online primary: </span><span md-src-pos="8756..8757" style="color: rgb(127, 218, 255);">{</span><span md-src-pos="8757..8758" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="8758..8769" style="color: rgb(122, 248, 202);">member_host</span><span md-src-pos="8769..8770" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="8770..8771">:</span><span md-src-pos="8771..8772" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="8772..8786" style="color: rgb(122, 248, 202);">192.168.50.163</span><span md-src-pos="8786..8787" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="8787..8800">, member_port</span><span md-src-pos="8800..8801" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="8801..8808" style="color: rgb(122, 248, 202);">:3306}
</span><span md-src-pos="8808..8809" style="color: rgb(122, 248, 202);">
</span><span md-src-pos="8809..8819" style="color: rgb(122, 248, 202);">All done!
</span><span md-src-pos="8819..8822"></span></code></pre>
   <p md-src-pos="9443..9707"><span md-src-pos="9443..9471">If the above command returns</span> <code md-src-pos="9472..9501">Ok: Found online primary...</code> <span md-src-pos="9502..9509">and the</span> <code md-src-pos="9510..9523">member_host</code> <span md-src-pos="9524..9560">displayed by the command matches the</span> <code md-src-pos="9561..9574">MEMBER_HOST</code> <span md-src-pos="9575..9607">from the database command above,</span> <span md-src-pos="9608..9643">then the issue is likely that Porta</span>'<span md-src-pos="9644..9707">s active connection is not being set to the primary connection.</span></p>
   <p md-src-pos="9709..9771"><span md-src-pos="9709..9723">To check Porta</span>'<span md-src-pos="9724..9744">s active connection,</span> <span md-src-pos="9745..9770">run the following command</span>:</p>
   <pre class="code-fence" md-src-pos="9772..9839"><div class="code-fence-highlighter-copy-button" data-fence-content="ZG9ja2VyIGV4ZWMgLWl0IHBvcnRhIGJhc2ggLWMgImNhdCAuZW52IHwgZ3JlcCBEQl9IT1NUIg==">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="9772..9839"><a class="run-icon code-block" href="#" role="button" data-command="Run:7925b102dc4bb29ce7c92291bad4bd5" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="9153..9161"></span><span md-src-pos="9161..9191">docker exec -it porta bash -c </span><span md-src-pos="9191..9192" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="9192..9215" style="color: rgb(122, 248, 202);">cat .env | grep DB_HOST</span><span md-src-pos="9215..9216" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="9216..9217">
</span><span md-src-pos="9217..9220"></span></code></pre>
   <p md-src-pos="9840..9875"><span md-src-pos="9840..9874">This will result in something like</span>:</p>
   <pre class="code-fence" md-src-pos="9876..9985"><div class="code-fence-highlighter-copy-button" data-fence-content="REJfSE9TVF8xPTE5Mi4xNjguNTAuMTYzCkRCX0hPU1RfMj0xOTIuMTY4LjUwLjIwCkRCX0hPU1RfMz0xOTIuMTY4LjUwLjQyCkRCX0hPU1Q9IiR7REJfSE9TVF8zfSI=">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-dotenv" md-src-pos="9876..9985"><span md-src-pos="9257..9267"></span><span md-src-pos="9267..9276" style="color: rgb(186, 172, 255);">DB_HOST_1</span><span md-src-pos="9276..9277" style="color: rgb(186, 172, 255);">=</span><span md-src-pos="9277..9291" style="color: rgb(122, 248, 202);">192.168.50.163</span><span md-src-pos="9291..9292">
</span><span md-src-pos="9292..9301" style="color: rgb(186, 172, 255);">DB_HOST_2</span><span md-src-pos="9301..9302" style="color: rgb(186, 172, 255);">=</span><span md-src-pos="9302..9315" style="color: rgb(122, 248, 202);">192.168.50.20</span><span md-src-pos="9315..9316">
</span><span md-src-pos="9316..9325" style="color: rgb(186, 172, 255);">DB_HOST_3</span><span md-src-pos="9325..9326" style="color: rgb(186, 172, 255);">=</span><span md-src-pos="9326..9339" style="color: rgb(122, 248, 202);">192.168.50.42</span><span md-src-pos="9339..9340">
</span><span md-src-pos="9340..9347" style="color: rgb(186, 172, 255);">DB_HOST</span><span md-src-pos="9347..9348" style="color: rgb(186, 172, 255);">=</span><span md-src-pos="9348..9349">"</span><span md-src-pos="9349..9361" style="color: rgb(122, 248, 202);">${DB_HOST_3}</span><span md-src-pos="9361..9363">"
</span><span md-src-pos="9363..9366"></span></code></pre>
   <p md-src-pos="9987..10071"><span md-src-pos="9987..9990">The</span> <code md-src-pos="9991..10000">DB_HOST</code> <span md-src-pos="10001..10047">variable should be set to the primary database</span>'<span md-src-pos="10048..10049">s</span> <code md-src-pos="10050..10061">DB_HOST_#</code> <span md-src-pos="10062..10071">variable.</span></p>
   <p md-src-pos="10073..10258"><em md-src-pos="10073..10258">In this example, the primary database has a <code md-src-pos="10118..10131">MEMBER_HOST</code> of 192.168.50.163, which is the value of <code md-src-pos="10173..10184">DB_HOST_1</code>. So <code md-src-pos="10189..10198">DB_HOST</code> should actually be set to <code md-src-pos="10225..10236">DB_HOST_1</code> and not <code md-src-pos="10245..10256">DB_HOST_3</code>.</em></p>
   <p md-src-pos="10260..10316"><span md-src-pos="10260..10316">Cross-reference this with the cached configuration file.</span></p>
   <pre class="code-fence" md-src-pos="10317..10426"><div class="code-fence-highlighter-copy-button" data-fence-content="ZG9ja2VyIGV4ZWMgLWl0IHBvcnRhIGJhc2ggLWMgImNhdCBib290c3RyYXAvY2FjaGUvY29uZmlnLnBocCB8IGdyZXAgLUIgMiBcIidkZWZhdWx0JyA9PiAnbXlzcVwiIg==">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="10317..10426"><a class="run-icon code-block" href="#" role="button" data-command="Run:316f9f7e58adc7a021210d252fccd14" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="9698..9706"></span><span md-src-pos="9706..9736">docker exec -it porta bash -c </span><span md-src-pos="9736..9737" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="9737..9802" style="color: rgb(122, 248, 202);">cat bootstrap/cache/config.php | grep -B 2 \"'default' =&gt; 'mysq\"</span><span md-src-pos="9802..9803" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="9803..9804">
</span><span md-src-pos="9804..9807"></span></code></pre>
   <p md-src-pos="10427..10462"><span md-src-pos="10427..10461">This will result in something like</span>:</p>
   <pre class="code-fence" md-src-pos="10463..10530"><div class="code-fence-highlighter-copy-button" data-fence-content="J2RhdGFiYXNlJyA9PiAKICBhcnJheSAoCiAgICAnZGVmYXVsdCcgPT4gJ215c3FsLTMnLA==">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-php" md-src-pos="10463..10530"><span md-src-pos="9844..9851"></span><span md-src-pos="9851..9855">    </span><span md-src-pos="9855..9856" style="color: rgb(122, 248, 202);">'</span><span md-src-pos="9856..9864" style="color: rgb(122, 248, 202);">database</span><span md-src-pos="9864..9865" style="color: rgb(122, 248, 202);">'</span><span md-src-pos="9865..9866"> </span><span md-src-pos="9866..9868" style="color: rgb(186, 172, 255);">=&gt;</span><span md-src-pos="9868..9870">
</span><span md-src-pos="9870..9872">  </span><span md-src-pos="9872..9877" style="color: rgb(186, 172, 255);">array</span><span md-src-pos="9877..9878"> </span><span md-src-pos="9878..9879" style="color: rgb(180, 194, 240);">(</span><span md-src-pos="9879..9880">
</span><span md-src-pos="9880..9884">    </span><span md-src-pos="9884..9885" style="color: rgb(122, 248, 202);">'</span><span md-src-pos="9885..9892" style="color: rgb(122, 248, 202);">default</span><span md-src-pos="9892..9893" style="color: rgb(122, 248, 202);">'</span><span md-src-pos="9893..9894"> </span><span md-src-pos="9894..9896" style="color: rgb(186, 172, 255);">=&gt;</span><span md-src-pos="9896..9897"> </span><span md-src-pos="9897..9898" style="color: rgb(122, 248, 202);">'</span><span md-src-pos="9898..9905" style="color: rgb(122, 248, 202);">mysql-3</span><span md-src-pos="9905..9906" style="color: rgb(122, 248, 202);">'</span><span md-src-pos="9906..9907" style="color: rgb(180, 194, 240);">,</span><span md-src-pos="9907..9908">
</span><span md-src-pos="9908..9911"></span></code></pre>
   <p md-src-pos="10532..10659"><span md-src-pos="10532..10566">The numeric suffix of the value of</span> <code md-src-pos="10567..10581">'default' =&gt;</code> <span md-src-pos="10582..10612">should match the suffix of the</span> <code md-src-pos="10613..10624">DB_HOST_#</code> <span md-src-pos="10625..10638">variable that</span> <code md-src-pos="10639..10648">DB_HOST</code> <span md-src-pos="10649..10659">is set to.</span></p>
   <p md-src-pos="10661..10778"><em md-src-pos="10661..10778">In this example, they're both 3, so the configuration is cached correctly, but is not set to the primary connection</em></p>
   <p md-src-pos="10780..11038"><span md-src-pos="10780..10799">Your initial run of</span> <code md-src-pos="10800..10971">docker exec -it porta bash -c "php artisan health:single-check 'PrimaryDatabaseConnectionCheck' --do-not-store-results --no-notification --fail-command-on-failing-check"</code> <span md-src-pos="10972..11038">should have triggered a connection change to the primary database.</span></p>
   <p md-src-pos="11040..11241"><span md-src-pos="11040..11054">If it did not,</span> <span md-src-pos="11055..11134">then you can manually set the connection to the primary database by editing the</span> <span md-src-pos="11135..11144">.env file</span>'<span md-src-pos="11145..11146">s</span> <code md-src-pos="11147..11156">DB_HOST</code> <span md-src-pos="11157..11182">variable and then running</span> <code md-src-pos="11183..11209">php artisan config:cache</code> <span md-src-pos="11210..11241">to cache the new configuration.</span></p>
   <h2 id="when-running-backup-tool-command-backup-failed-because-parameter-host-cannot-be-empty" md-src-pos="11243..11339">When running backup tool command: <code md-src-pos="11280..11339">Backup failed because Parameter 'host' cannot be empty...</code></h2>
   <p md-src-pos="11341..11456"><span md-src-pos="11341..11456">This error can occur when running the backup tool command on a machine that does not have its configuration cached.</span></p>
   <p md-src-pos="11458..11497"><span md-src-pos="11458..11470">To fix this,</span> <span md-src-pos="11471..11496">run the following command</span>:</p>
   <pre class="code-fence" md-src-pos="11498..11566"><div class="code-fence-highlighter-copy-button" data-fence-content="ZG9ja2VyIGV4ZWMgLWl0IHBvcnRhIGJhc2ggLWMgInBocCBhcnRpc2FuIGNvbmZpZzpjYWNoZSI=">
  <img class="code-fence-highlighter-copy-button-icon" data-original-src="offline/install" src="http://localhost:63342/markdownPreview/1855382081/offline/install?_ijt=7hudi9hn4os61km8f7dfgquujq">
  <span class="tooltiptext">Copy to clipboard</span>
</div><code class="language-bash" md-src-pos="11498..11566"><a class="run-icon code-block" href="#" role="button" data-command="Run:1ecbcbb21c0335bfbce4f88555c9989" data-commandtype="block"><img src="commandRunner/runrun.png"></a><span md-src-pos="10879..10887"></span><span md-src-pos="10887..10917">docker exec -it porta bash -c </span><span md-src-pos="10917..10918" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="10918..10942" style="color: rgb(122, 248, 202);">php artisan config:cache</span><span md-src-pos="10942..10943" style="color: rgb(122, 248, 202);">"</span><span md-src-pos="10943..10944">
</span><span md-src-pos="10944..10947"></span></code></pre>
   <p md-src-pos="11568..11622"><span md-src-pos="11568..11622">Running the backup tool command again should now work.</span></p>
   <h2 id="error-on-login-500-internal-server-error--could-not-create-token-key-provided-is-shorter-than-256-bits" md-src-pos="11625..11737">Error on Login: "500 Internal Server Error" / "Could not create token: Key provided is shorter than 256 bits"</h2>
   <p md-src-pos="11738..11809"><span md-src-pos="11738..11768">If you get this generic error,</span> <span md-src-pos="11769..11796">you may need to cache a new</span> <code md-src-pos="11797..11809">JWT_SECRET</code></p>
   <p md-src-pos="11811..11835"><span md-src-pos="11811..11834">Try the following steps</span>:</p>
   <ol md-src-pos="11837..12111">
    <li md-src-pos="11837..11900">Access the docker CLI as described in the Docker CLI section</li>
    <li md-src-pos="11901..11954">Run <code md-src-pos="11908..11933">php artisan cache:clear</code> to clear your cache</li>
    <li md-src-pos="11955..12028">Run <code md-src-pos="11962..11986">php artisan jwt:secret</code> to generate a token key, confirm with yes</li>
    <li md-src-pos="12029..12111">Run <code md-src-pos="12036..12062">php artisan config:cache</code> to cache the token key so your config can use it</li>
   </ol>
   <p md-src-pos="12113..12147"><span md-src-pos="12113..12147">Then try logging in to Porta again</span></p>
  </div>
 </body>
</html>
